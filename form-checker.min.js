function NumberFormat(){function b(a,b){for(b=b||2;a.length<b;)a="0"+a;return a}function c(a,c){var d=Math.ceil(a.length/c);return b(a,d*c)}var a=this;this.masks={"default":{decimals:2,whole:3,section:",",decimal:"."},"float":{decimals:2,whole:3,section:",",decimal:"."},latin:{decimals:2,whole:3,section:".",decimal:","},integer:{decimals:0,whole:3,section:" ",decimal:"."},binary:{decimals:0,whole:4,section:"-",base:2},hex:{decimals:0,whole:2,section:".",base:16}};var d=function(a,b,d,e,f,g){a=a||0,d=d||3,b=g?0:~~b;var h=g?c((~~a).toString(g),d):a.toFixed(Math.max(0,b)),i=new RegExp("\\d(?=(\\d{"+d+"})+"+(b>0?"\\D":"$")+")","g");return(f?h.replace(".",f):h).replace(i,"$&"+(e||","))},e=function(a,b,c,d){if("string"!=typeof a)return a;var e=new RegExp("[\\s"+b+"]+","g"),f=d&&10!=d?parseInt(a.replace(e,"").replace(c,""),d):parseFloat(a.replace(e,"").replace(c,"."));return isNaN(f)?parseFloat(a):f};this.toNumber=function(b,c){var d=a.masks[c]||c||a.masks["default"];return e(b,d.section,d.decimal,d.base)},this.format=function(b,c){if(isNaN(+b))return b;var e=a.masks[c]||c||a.masks["default"];return d(b,e.decimals,e.whole,e.section,e.decimal,e.base)}}function DateFormat(){function e(a,b){for(a=new String(a),b=b||2;a.length<b;)a="0"+a;return a}function f(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate());b.setDate(b.getDate()-(b.getDay()+6)%7+3);var c=new Date(b.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);var d=b.getTimezoneOffset()-c.getTimezoneOffset();b.setHours(b.getHours()-d);var e=(b-c)/6048e5;return 1+Math.floor(e)}function g(a){var b=a.getDay();return 0===b?7:b}var a=this,b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g;this.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"yy/m/d",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",latinDate:"dd/mm/yyyy",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",latinDateTime:"dd/mm/yyyy'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",dateTime:"yyyy-mm-dd HH:MM:ss",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},this.i18n={dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},this.isValid=function(a){return a instanceof Date&&a.getTime&&!isNaN(a.getTime())},this.toDate=function(c,d){if(!c)return null;var e={};d=a.masks[d]||d||a.masks["default"];var f=c.trim().match(/[a-zA-Z]+|\d+/g);d.match(b).forEach(function(a,b){e[a]=f[b]});var g=e.d||e.dd||1,h=e.m||e.mm;h?h--:(h=a.i18n.monthNamesShort.indexOf(e.mmm),h<0&&(h=Math.max(a.i18n.monthNames.indexOf(e.mmmm),0)));var i=e.yyyy||(new Date).getFullYear().toString().substr(0,2)+e.yy,j=e.H||e.HH||(e.h||e.hh)%12||12,k=e.M||e.MM||0,l=e.s||e.ss||0,m=new Date(+i,h,g,+j,+k,+l);return a.isValid(m)?m:null},this.format=function(h,i,j,k){if(1===arguments.length&&"string"==typeof h&&(i=h,h=new Date),!a.isValid(h))return h;i=a.masks[i]||i||a.masks["default"];var l=i.slice(0,4);("UTC:"===l||"GMT:"===l)&&(k="GMT:"===l,i=i.slice(4),j=!0);var m=j?"getUTC":"get",n=h[m+"Date"](),o=h[m+"Day"](),p=h[m+"Month"](),q=h[m+"FullYear"](),r=h[m+"Hours"](),s=h[m+"Minutes"](),t=h[m+"Seconds"](),u=h[m+"Milliseconds"](),v=j?0:h.getTimezoneOffset(),w=f(h),x=g(h),y={d:n,dd:e(n),ddd:a.i18n.dayNamesShort[o],dddd:a.i18n.dayNames[o],m:p+1,mm:e(p+1),mmm:a.i18n.monthNamesShort[p],mmmm:a.i18n.monthNames[p],yy:String(q).slice(2),yyyy:q,h:r%12||12,hh:e(r%12||12),H:r,HH:e(r),M:s,MM:e(s),s:t,ss:e(t),l:e(u,3),L:e(Math.round(u/10)),t:r<12?"a":"p",tt:r<12?"am":"pm",T:r<12?"A":"P",TT:r<12?"AM":"PM",Z:k?"GMT":j?"UTC":(String(h).match(c)||[""]).pop().replace(d,""),o:(v>0?"-":"+")+e(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][n%10>3?0:(n%100-n%10!=10)*n%10],W:w,N:x};return i.replace(b,function(a){return a in y?y[a]:a.slice(1,a.length-1)})}}function FormChecker(a,b){b=b||{},b["msg.err.value"]=b["msg.err.value"]||"Invalid data",b["msg.err.form"]=b["msg.err.form"]||"Form contains errors";var c=new NumberFormat,d=new DateFormat,e=function(a){return $(a).val()||""},f=function(a,b){return a&&a.getAttribute(b)},g=function(a,b){return parseFloat(f(a,b))},h=function(a,b){return parseFloat(e(a,b))},i=function(a){return a&&"false"!=a&&"0"!=a},j=function(a,b){return i(e(a,b))},k=function(a,c){var d=f(a,"data-msg-"+c)||b["msg.err."+c]||b["msg.err.value"],e="hidden"==f(a,"type")?$(a).siblings("[alt=errbox]"):$(a);return e.next("span.tooltip").length||e.after('<span class="tooltip">'+d+"</span>").show(),a},l={required:function(a){return j(a)?e(a):!0},minlength:function(a,b){return!e(a)||g(a,b)<=e(a).length},maxlength:function(a,b){return!e(a)||g(a,b)>=e(a).length},email:function(a,b){return!j(b)||!e(a)||/\w+[^\s@]+@[^\s@]+\.[^\s@]+/.test(e(a))},regex:function(a,b){return!e(a)||new RegExp(f(a,b)).test(e(a))},digits:function(a){return!j(attr)||!e(a)||/\d+/.test(e(a))},number:function(a,b){return!e(a)||!isNaN(c.toNumber(e(a),f(a,b)))},min:function(a,b){var d=c.toNumber(e(a),f(a,"number"));return!e(a)||!isNaN(d)&&g(a,b)<=d},max:function(a,b){var d=c.toNumber(e(a),f(a,"number"));return!e(a)||!isNaN(d)&&g(a,b)>=d},range:function(a,b){if(!e(a))return!0;try{var c=JSON.parse(f(a,b))}catch(d){return!1}return h(a)>=parseFloat(c[0])&&h(a)<=parseFloat(c[1])},date:function(a,b){return!e(a)||d.isValid(d.toDate(e(a),f(a,b)))},mindate:function(a,b){var c=new Date(f(a,b));return!e(a)||d.isValid(c)&&l.date(a,"date")&&c<=d.toDate(e(a),f(a,"date"))},maxdate:function(a,b){var c=new Date(f(a,b));return!e(a)||d.isValid(c)&&l.date(a,"date")&&c>=d.toDate(e(a),f(a,"date"))},equalto:function(b,c){return!e(b)||e(b)==$(f(b,c),a).val()}};this.get=function(a){return l[a]},this.set=function(a,b){return l[a]=b,this},this.errors=function(b){if(b)for(var c in b)$("[name="+c+"]:input",a).each(function(){k(this,b[c])});return this},this.flush=function(){return $("span.tooltip",a).remove(),this},this.check=function(){this.flush();var b=!0;for(var c in l)$("["+c+"]:input",a).each(function(){var a=l[c];b=a(this,c)?b:!k(this,c)});return b}}